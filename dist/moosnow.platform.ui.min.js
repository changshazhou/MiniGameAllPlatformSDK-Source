var mx=function(){"use strict";var n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)};function t(t,o){function e(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}var h=function(){return(h=Object.assign||function(t){for(var o,e=1,n=arguments.length;e<n;e++)for(var i in o=arguments[e])Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);return t}).apply(this,arguments)};function c(){for(var t=0,o=0,e=arguments.length;o<e;o++)t+=arguments[o].length;for(var n=Array(t),i=0,o=0;o<e;o++)for(var r=arguments[o],a=0,s=r.length;a<s;a++,i++)n[i]=r[a];return n}var i=(o.VIBRATESWITCH_CHANGED="VIBRATESWITCH_CHANGED",o.SOUNDSWITCH_CHANGED="SOUNDSWITCH_CHANGED",o.MUSICSWITCH_CHANGED="MUSICSWITCH_CHANGED",o.ON_PLATFORM_SHOW="ON_PLATFORM_SHOW",o.ON_PLATFORM_HIDE="ON_PLATFORM_HIDE",o.ON_BANNER_ERROR="ON_BANNER_ERROR",o.ON_BANNER_HIDE="ON_BANNER_HIDE",o.ON_AD_SHOW="ON_AD_SHOW",o.AD_VIEW_CHANGE="AD_VIEW_CHANGE",o.AD_VIEW_REFRESH="AD_VIEW_REFRESH",o.COIN_CHANGED="COIN_CHANGED",o.RANDOWM_NAVIGATE="RANDOWM_NAVIGATE",o.COMPONENT_CHECKBOX_TOGGLE="COMPONENT_CHECKBOX_TOGGLE",o.PRIZE_BOX_UNLOCAK="PRIZE_BOX_UNLOCAK",o);function o(){}var e,r,s=0,a=1,l=2,m=16,u=32,p=64,d=128,f=256,y=512,v=1024,g=32768,w=16384,C="https://liteplay-1253992229.cos.ap-guangzhou.myqcloud.com";(r=e=e||{})[r.WX=0]="WX",r[r.BYTEDANCE=1]="BYTEDANCE",r[r.OPPO=2]="OPPO",r[r.OPPO_ZS=3]="OPPO_ZS",r[r.BAIDU=4]="BAIDU",r[r.QQ=5]="QQ",r[r.PC=6]="PC",r[r.VIVO=7]="VIVO",r[r.UC=8]="UC";var b="cc",N="Laya",F="",A=(k.titleCase=function(t){for(var o=t.toLowerCase().split(/\s+/),e=0;e<o.length;e++)o[e]=o[e].slice(0,1).toUpperCase()+o[e].slice(1);return o.join(" ")},k.numFixed=function(t,o){return parseFloat(parseFloat(t).toFixed(o))},k.parseMoney=function(t){return isNaN(t)?0:parseFloat(parseFloat(t).toFixed(2))},k.objKeySort=function(t){for(var o=Object.keys(t).sort(),e={},n=0;n<o.length;n++)e[o[n]]=t[o[n]];return e},k.isObject=function(t){var o=typeof t;return null!==t&&("object"==o||"function"==o)},k.object2Query=function(t){var o=[];for(var e in t)o.push(e+"="+t[e]);return o.join("&")},k.isFunction=function(t){return"function"==typeof t},k.isEmpty=function(t){if("object"!=typeof t)return null==t||"null"===t||"undefined"===t||""===t;var o;for(o in t)return!1;return!0},k.formatTime=function(t){return[t.getHours(),t.getMinutes()].map(this.formatNumber).join(":")},k.formatNumber=function(t){return(t=t.toString())[1]?t:"0"+t},k.copy=function(t,o){for(var e in t)o[e]=t[e]},k.randomNumBoth=function(t,o){var e=o-t,n=Math.random();return t+Math.round(n*e)},k.randomFloat=function(t,o){return t+Math.random()*o},k.randomToRatio=function(t,o,e){return this.randomNumBoth(t,o)<=e},k.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?o:3&o|8).toString(16)})},k.isNumber=function(t){return"number"==typeof t||"[object Number]"==Object.prototype.toString.call(t)},k.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)},k.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},Object.defineProperty(k,"platform",{get:function(){if(this.mPlatform)return this.mPlatform;var t,o=window.moosnowConfig;return window.tt?this.mPlatform=e.BYTEDANCE:window.swan?this.mPlatform=e.BAIDU:window.qq?this.mPlatform=e.QQ:window.qg?window.qg&&window.qg.getSystemInfoSync?(t=window.qg.getSystemInfoSync(),console.log("平台判断",JSON.stringify(t)),t&&t.brand&&-1!=t.brand.toLocaleLowerCase().indexOf("vivo")?this.mPlatform=e.VIVO:o.oppo&&o.oppo.url&&-1!=o.oppo.url.indexOf("platform.qwpo2018.com")?this.mPlatform=e.OPPO_ZS:this.mPlatform=e.OPPO):o.oppo&&o.oppo.url&&-1!=o.oppo.url.indexOf("platform.qwpo2018.com")?this.mPlatform=e.OPPO_ZS:this.mPlatform=e.OPPO:window.uc?this.mPlatform=e.UC:window.wx?this.mPlatform=e.WX:o.debug&&o[o.debug]?"wx"==o.debug?this.mPlatform=e.WX:"oppo"==o.debug?o.oppo&&o.oppo.url&&-1!=o.oppo.url.indexOf("platform.qwpo2018.com")?this.mPlatform=e.OPPO_ZS:this.mPlatform=e.OPPO:"bd"==o.debug?this.mPlatform=e.BAIDU:"byte"==o.debug?this.mPlatform=e.BYTEDANCE:"qq"==o.debug?this.mPlatform=e.QQ:"vivo"==o.debug?this.mPlatform=e.VIVO:"uc"==o.debug?this.mPlatform=e.UC:this.mPlatform=e.PC:this.mPlatform=e.PC,this.mPlatform},enumerable:!0,configurable:!0}),Object.defineProperty(k,"isOnlyUI",{get:function(){return 1==window.onlyUI},enumerable:!0,configurable:!0}),Object.defineProperty(k,"isPC",{get:function(){return cc.sys.browserType===cc.sys.BROWSER_TYPE_CHROME},enumerable:!0,configurable:!0}),Object.defineProperty(k,"config",{get:function(){var t=window.moosnowConfig,o=k.platform==e.WX?t.wx:k.platform==e.OPPO||k.platform==e.OPPO_ZS?t.oppo:k.platform==e.VIVO?t.vivo:k.platform==e.QQ?t.qq:k.platform==e.BAIDU?t.bd:k.platform==e.BYTEDANCE?t.byte:t.wx;return o},enumerable:!0,configurable:!0}),k.colorRGB2Hex=function(t){var o=t.split(",");return"#"+((1<<24)+(parseInt(o[0].split("(")[1])<<16)+(parseInt(o[1])<<8)+parseInt(o[2].split(")")[0])).toString(16).slice(1)},k.deepCopy=function(t){var o=Array.isArray(t)?[]:{};if(t&&"object"==typeof t)for(var e in t)t.hasOwnProperty(e)&&(t[e]&&"object"==typeof t[e]?o[e]=this.deepCopy(t[e]):o[e]=t[e]);return o},k.getEngine=function(){return window[b]?b:window[N]?N:F},k.popOpenAnim=function(t,o){if(this.getEngine()==b)return t.scale=.8,void t.runAction(cc.sequence(cc.scaleTo(.1,1.2,1.2),cc.scaleTo(.1,1,1),cc.callFunc(function(){o&&o()},this)));o()},k.popCloseAnim=function(t,o){if(this.getEngine()==b)return t.scale=1,void t.runAction(cc.sequence(cc.scaleTo(.1,0,0),cc.callFunc(function(){o&&o()},this)));o()},k.format=function(t){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];if(void 0===t||null==t||""==t||"undefined"==t)return t;for(var n=0;n<o.length;n++){var i=new RegExp("\\{"+n+"\\}","gm");t=t.replace(i,o[n])}return t},k.formatMoney=function(t){return isNaN(t)&&(t=0),t<9999?parseInt(""+t):t<9999999?parseFloat(""+t/1e3).toFixed(2)+"K":t<9999999999?parseFloat(""+t/1e6).toFixed(2)+"M":t<9999999999999?parseFloat(""+t/1e9).toFixed(2)+"G":t<1e16?parseFloat(""+t/1e12).toFixed(2)+"T":t<1e19?parseFloat(""+t/1e15).toFixed(2)+"P":t<1e22?parseFloat(""+t/1e18).toFixed(2)+"E":parseFloat(""+t/1e21).toFixed(2)+"B"},k);function k(){}var T=(S.parse=function(t){return h(h({},new S),t)},S.convertStr2Enum=function(t,o,e){return t.hasOwnProperty(o)?t[o]:e},S);function S(){this.x=0,this.y=0,this.width="canvasWidth",this.height="canvasHeight",this.url="",this.isMask=!1,this.maskUrl="",this.child=null,this.event=[],this.type="",this.active=!0,this.widget=null,this.grid=null,this.zIndex=0,this.stopPropagation=!1}var x=function(){this.formNode=null,this.formLogic=null},D=(Object.defineProperty(L.prototype,"quene",{get:function(){return this.mQuene},set:function(t){this.mQuene=t},enumerable:!0,configurable:!0}),L);function L(){this.formName="",this.mQuene=[]}var O=(Object.defineProperty(I.prototype,"layoutQuene",{get:function(){return this.mFormQuene},set:function(t){this.mFormQuene=t},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"cachedLayoutQuene",{get:function(){return this.mCachedLayoutQuene},set:function(t){this.mCachedLayoutQuene=t},enumerable:!0,configurable:!0}),I.prototype.destory=function(){this.cachedLayoutQuene=[],this.layoutQuene=[]},I.prototype.addFrom2Cached=function(t,o){for(var e,n=-1,i=0;i<this.cachedLayoutQuene.length;i++)if((e=this.cachedLayoutQuene[i]).formName==t){n=i;break}-1!=n?this.cachedLayoutQuene[n].quene.push(o):((e=new D).formName=t,e.quene.push(o),this.cachedLayoutQuene.push(e))},I.prototype.getFormFromCached=function(t){for(var o=0;o<this.cachedLayoutQuene.length;o++){var e=this.cachedLayoutQuene[o];if(e.formName==t){var n=0;if(n<e.quene.length)return e.quene.splice(n,1),0==e.quene.length&&this.cachedLayoutQuene.splice(o,1),e.quene[n];break}}return null},I.prototype.addForm2Quene=function(t,o,e){for(var n,i,r=-1,a=0;a<this.layoutQuene.length;a++)if(this.layoutQuene[a].formName==t){r=a;break}-1!=r?((i=new x).formNode=o,i.formLogic=e,this.layoutQuene[r].quene.push(i)):((n=new D).formName=t,(i=new x).formNode=o,i.formLogic=e,n.quene.push(i),this.layoutQuene.push(n))},I.prototype.hasFormInQuene=function(t){for(var o=-1,e=0;e<this.layoutQuene.length;e++)if(this.layoutQuene[e].formName==t){o=e;break}return-1!=o},I.prototype.recoverFormLogic=function(o,t,e,n){var i=this;void 0===n&&(n=1);var r=o.quene.splice(t,n);if(0==o.quene.length)for(var a=0;a<this.layoutQuene.length;a++)if(o==this.layoutQuene[a]){this.layoutQuene.splice(a,1);break}r.forEach(function(t){i.addFrom2Cached(o.formName,t)}),e&&(1==r.length?e(r[0]):e(r))},I.prototype.removeFormByLogic=function(t,o){for(var e=0;e<this.layoutQuene.length;e++)for(var n=this.layoutQuene[e],i=0;i<n.quene.length;i++)if(n.quene[i].formLogic==t){this.recoverFormLogic(n,i,o);break}},I.prototype.removeFormFromQuene=function(t,o,e){for(var n=0;n<this.layoutQuene.length;n++){var i=this.layoutQuene[n];if(i.formName==t){for(var r=0;r<i.quene.length;r++)if(i.quene[r]==o){this.recoverFormLogic(i,r,e);break}break}}},I.prototype.removeAllFormFromQuene=function(t,o){for(var e=0;e<this.layoutQuene.length;e++){var n=this.layoutQuene[e];if(n.formName==t){for(var i=0;i<n.quene.length;i++)this.recoverFormLogic(n,i,o),i--;break}}},I.prototype.getKVByName=function(t,o){var e=this.getKVsByName(t);if(e)for(var n=0;n<e.length;n++)if(e[n].formNode==o)return e[n]},I.prototype.getKVsByName=function(t){for(var o=-1,e=0;e<this.layoutQuene.length;e++)if(this.layoutQuene[e].formName==t){o=e;break}return-1!=o?this.layoutQuene[o].quene:[]},I.prototype.setLayout=function(t){this.mCachedLayout=t},I.prototype.getLayout=function(t){var e=this;this.mCachedLayout?t(this.mCachedLayout):(this.mLayoutQuene.push(t),1==this.mLayoutQuene.length&&moosnow.http.request(this.layoutUrl,{},"GET",function(o){e.mCachedLayout=o,console.log("getLayout call num ",e.mLayoutQuene.length),e.mLayoutQuene.forEach(function(t){t(o)}),e.mLayoutQuene=[]}))},I.prototype.setTemplates=function(t){this.mCachedTemplates=t},I.prototype.getTemplates=function(t){var e=this;this.mCachedTemplates?t(this.mCachedTemplates):(this.mTemplatesQuene.push(t),1==this.mTemplatesQuene.length&&moosnow.http.request(this.templatesUrl,{},"GET",function(o){e.mCachedTemplates=o,e.mTemplatesQuene.forEach(function(t){t(o)}),e.mTemplatesQuene=[]}))},I.prototype.getTemplate=function(n,i){this.getTemplates(function(t){var o,e=t[n];e&&(o=T.parse(e),i(o))})},I.prototype.showForm=function(t){},I.prototype.hideFormByLogic=function(t,o){},I.prototype.hideForm=function(t,o,e){},I.prototype.createNodeByTemplate=function(t,o,e,n,i,r){void 0===i&&(i=!0),void 0===r&&(r=null)},I.prototype.hideNodeByTemplate=function(t,o,e){},I);function I(){this.layoutUrl=C+"/layout/"+A.config.moosnowAppId+"/layout.json",this.templatesUrl=C+"/layout/"+A.config.moosnowAppId+"/templates.json",this.maskUrl=C+"/layout/"+A.config.moosnowAppId+"/img_mask.png",this.mFormQuene=[],this.mCachedLayoutQuene=[],this.mLayoutQuene=[],this.mTemplatesQuene=[]}var P=(_.prototype.schedule=function(t,o){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var i=this,r=setInterval(function(){t&&t.apply.apply(t,c([i],e))},1e3*o,i);this.mIntervalArr[this.mScheduleIndex]={handle:r,callback:t},this.mScheduleIndex++},_.prototype.unschedule=function(t){for(var o in this.mIntervalArr)this.mIntervalArr[o].callback==t&&clearInterval(parseInt(this.mIntervalArr[o].handle))},_.prototype.scheduleOnce=function(t,o){var e=this,n=setTimeout(function(){clearTimeout(n),t&&t.apply(e)},1e3*o);this.mTimeoutArr[this.mScheduleIndex]={handle:n,callback:t},this.mScheduleIndex++},_.prototype.unscheduleOnce=function(t){for(var o in this.mTimeoutArr)this.mTimeoutArr[o].callback==t&&clearInterval(parseInt(this.mTimeoutArr[o].handle))},_.schedule=function(t,o){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var i=this,r=setInterval(function(){t&&t.apply.apply(t,c([i],e))},1e3*o,i);this.mIntervalArr[this.mScheduleIndex]={handle:r,callback:t},this.mScheduleIndex++},_.unschedule=function(t){for(var o in this.mIntervalArr)this.mIntervalArr[o].callback==t&&clearInterval(parseInt(this.mIntervalArr[o].handle))},_.scheduleOnce=function(t,o){var e=this,n=setTimeout(function(){clearTimeout(n),t&&t.apply(e)},1e3*o);this.mTimeoutArr[this.mScheduleIndex]={handle:n,callback:t},this.mScheduleIndex++},_.unscheduleOnce=function(t){for(var o in this.mTimeoutArr)this.mTimeoutArr[o].callback==t&&clearInterval(parseInt(this.mTimeoutArr[o].handle))},_.prototype.initProperty=function(t){for(var o in t)this.hasOwnProperty(o)&&(this[o]=t[o])},_.prototype.preload=function(t,o){o&&o()},_.prototype._findComponent=function(t,o){for(var e=null,n=0;n<t._components.length;n++){var i=t._components[n];if(i.willHide&&i.willShow){e=i;break}}return e},_.prototype._findComponentByName=function(t,o){return!!t&&(t.name==o||this._findComponentByName(t.$super,o))},_.mIntervalArr={},_.mTimeoutArr={},_.mScheduleIndex=0,_);function _(){this.moduleName="",this.mIntervalArr={},this.mTimeoutArr={},this.mScheduleIndex=0,this.mMaping={}}var B,E=(t(R,B=P),Object.defineProperty(R,"canvasNode",{get:function(){return cc.Canvas.instance.node},enumerable:!0,configurable:!0}),R.getNodeName=function(){return this.nodeNum++,"createNode"+this.nodeNum},R.createNode=function(){},R.createImage=function(t,o){},R.createText=function(t,o){},R.changeSrc=function(t,o){},R.createMask=function(t){},R.nodeNum=0,R);function R(){return null!==B&&B.apply(this,arguments)||this}var V,H=(t(M,V=P),Object.defineProperty(M.prototype,"node",{get:function(){return this.mOwner?this.mOwner:{}},set:function(t){this.mOwner=t},enumerable:!0,configurable:!0}),M.prototype.start=function(){},Object.defineProperty(M.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),M.prototype.initForm=function(t){for(var o in this.node=t,this){var e;A.isFunction(this[o])||((e=this.findNodeByName(t,o))&&(this[o]=e),this.mNodeMap.push(o))}for(var n=0;n<this.formComponents.length;n++)this.formComponents[n].initForm(t)},M.prototype.disable=function(){var o=this;this.node=null,this.mNodeMap.forEach(function(t){o[t]=null}),this.formComponents.forEach(function(t){t.disable()}),this.formComponents=[]},M.prototype.findNodeByName=function(t,o){return null},M.prototype.willShow=function(o){(this.mFormData=o)&&this.node&&(o.x&&(this.node.x=o.x),o.y&&(this.node.y=o.y),o.zIndex&&(this.node.zIndex=o.zIndex)),this.formComponents.forEach(function(t){t.willShow(o)})},M.prototype.onShow=function(o){this.formComponents.forEach(function(t){t.onShow(o)})},M.prototype.willHide=function(o){this.formComponents.forEach(function(t){t.willHide(o)})},M.prototype.onHide=function(o){this.formComponents.forEach(function(t){t.onHide(o)})},M.prototype.hideForm=function(){moosnow.form.formFactory.hideFormByLogic(this)},M);function M(){var t=null!==V&&V.apply(this,arguments)||this;return t.mOwner=null,t.formComponents=[],t.mNodeMap=[],t}var Q,U=(t(z,Q=H),Object.defineProperty(z,"TOUCH_START",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(z,"TOUCH_END",{get:function(){return""},enumerable:!0,configurable:!0}),z);function z(){return null!==Q&&Q.apply(this,arguments)||this}var W,j=(t(q,W=U),Object.defineProperty(q,"TOUCH_START",{get:function(){return cc.Node.EventType.TOUCH_START},enumerable:!0,configurable:!0}),Object.defineProperty(q,"TOUCH_END",{get:function(){return cc.Node.EventType.TOUCH_END},enumerable:!0,configurable:!0}),Object.defineProperty(q,"TOUCH_CANCEL",{get:function(){return cc.Node.EventType.TOUCH_CANCEL},enumerable:!0,configurable:!0}),q);function q(){return null!==W&&W.apply(this,arguments)||this}var G,Z=(t(X,G=T),X.parse=function(t){var o=h(h({},new X),t);return o.layoutType=T.convertStr2Enum(cc.Layout.Type,t.layoutType,cc.Layout.Type.GRID),o.resizeMode=T.convertStr2Enum(cc.Layout.ResizeMode,t.resizeMode,cc.Layout.ResizeMode.CONTAINER),o.startAxis=T.convertStr2Enum(cc.Layout.AxisDirection,t.startAxis,cc.Layout.AxisDirection.HORIZONTAL),o},X);function X(){var t=null!==G&&G.apply(this,arguments)||this;return t.layoutType=cc.Layout.Type.GRID,t.resizeMode=cc.Layout.ResizeMode.CONTAINER,t.startAxis=cc.Layout.AxisDirection.HORIZONTAL,t.left=30,t.top=30,t.right=30,t.bottom=30,t.spacingX=30,t.spacingY=30,t}var K,Y=(t(J,K=T),J.parse=function(t){return h(h({},new J),t)},J);function J(t,o,e,n,i,r,a,s){void 0===t&&(t=!1),void 0===o&&(o=!1),void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===i&&(i=0),void 0===r&&(r=0),void 0===a&&(a=0),void 0===s&&(s=0);var c=K.call(this)||this;return c.isAlignLeft=!1,c.isAlignTop=!1,c.isAlignRight=!1,c.isAlignBottom=!1,c.left=0,c.top=0,c.right=0,c.bottom=0,c.isAlignLeft=t,c.isAlignTop=o,c.isAlignRight=e,c.isAlignBottom=n,c.left=i,c.top=r,c.right=a,c.bottom=s,c}var $,tt=(t(ot,$=E),Object.defineProperty(ot,"canvasNode",{get:function(){return this.mRootNode||(this.mRootNode=cc.Canvas.instance.node),cc.Canvas.instance.node},set:function(t){this.mRootNode=t},enumerable:!0,configurable:!0}),ot.createNode=function(t,o){t=t||this.getNodeName();var e=new cc.Node;return e.name=t,o&&(e.active=o.active,e.zIndex=this.convertIndex(o.zIndex),o.stopPropagation&&this.addStopPropagation(e)),e},ot.createImage=function(t,o){var e=this.createNode(o.name,o),n=e.addComponent(cc.Sprite);return n.type=cc.Sprite.Type.SIMPLE,n.sizeMode=cc.Sprite.SizeMode.TRIMMED,n.trim=!0,e.width=this.convertWidth(o.width),e.height=this.convertHeight(o.height),this.changeSrc(e,o,function(){}),e.x=o.x,e.y=o.y,t.addChild(e),e},ot.colorHex2RGB=function(t){"#"==t.substr(0,1)&&(t=t.substring(1)),t=t.toLowerCase();for(var o=new Array,e=0;e<3;e++)o[0]=t.substr(2*e,2),o[3]="0123456789abcdef",o[1]=o[0].substr(0,1),o[2]=o[0].substr(1,1),o[20+e]=16*o[3].indexOf(o[1])+o[3].indexOf(o[2]);return new cc.Color(o[20],o[21],o[22])},ot.createText=function(t,o){var e=this.createNode(o.name,o);e.color=this.colorHex2RGB(o.color);var n=e.addComponent(cc.Label);n.enableWrapText=!1,n.overflow=cc.Label.Overflow.SHRINK,n.fontSize=o.fontSize,n.lineHeight=o.lineHeight;var i=cc.Label.HorizontalAlign[o.horizontalAlign.toUpperCase()];return n.horizontalAlign=i||cc.Label.HorizontalAlign.CENTER,n.verticalAlign=cc.Label.VerticalAlign.CENTER,n.useSystemFont=!0,o.text&&(n.string=o.text),e.x=o.x,e.y=o.y,e.width=this.convertWidth(o.width),e.height=this.convertWidth(o.height),t.addChild(e),e},ot.createLayout=function(t,o){var e=this.createNode(o.name,o),n=e.addComponent(cc.Layout);return n.paddingLeft=o.left,n.paddingTop=o.top,n.paddingRight=o.right,n.paddingBottom=o.bottom,n.spacingX=o.spacingX,n.spacingY=o.spacingY,n.startAxis=o.startAxis,e.x=o.x,e.y=o.y,e.width=this.convertWidth(o.width),e.height=this.convertWidth(o.height),t.addChild(e),e},ot.createProgressBar=function(t,o){var e,n=this.createNode(o.name,o),i=n.addComponent(cc.ProgressBar);return n.addComponent(cc.Sprite),this.changeSrc(n,o),i.mode=cc.ProgressBar.Mode.HORIZONTAL,i.totalLength=300,i.progress=.1,n.x=o.x,n.y=o.y,n.width=this.convertWidth(o.width),n.height=this.convertWidth(o.height),o.child&&0<o.child.length&&(e=this.createImage(n,T.parse(o.child[0])),i.barSprite=e.getComponent(cc.Sprite)),t.addChild(n),n},ot.createScroll=function(t,o){},ot.createView=function(t,o){var e=this.createImage(t,o);e.width=this.convertWidth(o.scroll.width),e.height=this.convertHeight(o.scroll.height),o.widget&&this.createWidget(e,Y.parse(o.widget));var n=this.createNode(o.name+"_scroll",o),i=n.addComponent(cc.ScrollView);i.horizontal=!!o.scroll.horizontal,i.vertical=!!o.scroll.vertical,i.horizontalScrollBar=null,i.verticalScrollBar=null,n.width=this.convertWidth(o.scroll.width),n.height=this.convertHeight(o.scroll.height),e.addChild(n),o.layout.widget&&this.createWidget(n,o.layout.widget);var r=this.createNode(o.name+"_view");r.addComponent(cc.Mask),this.createWidget(r,new Y(!0,!0,!0,!0,0,0,0,0)),n.addChild(r),o.layout.name=o.name+"_layout";var a=this.createLayout(r,Z.parse(o.layout));return a.width=this.convertWidth(o.layout.width),a.height=this.convertHeight(o.layout.height),{viewContainer:e,layoutNode:i.content=a}},ot.createWidget=function(t,o){var e=t.addComponent(cc.Widget);return e.isAlignLeft=o.isAlignLeft,e.isAlignTop=o.isAlignTop,e.isAlignRight=o.isAlignRight,e.isAlignBottom=o.isAlignBottom,e.left=o.left,e.top=o.top,e.right=o.right,e.bottom=o.bottom,e.updateAlignment(),t},ot.addToSrcQuene=function(t,o,e){for(var n=!1,i=0;i<this.srcQuene.length;i++)if(this.srcQuene[i].node==t){n=!0,this.srcQuene[i]={node:t,imgCfg:o,callback:e};break}n||this.srcQuene.push({node:t,imgCfg:o,callback:e})},ot.getSrcQuene=function(t){for(var o=null,e=0;e<this.srcQuene.length;e++)if(this.srcQuene[e].node==t){o=this.srcQuene[e];break}return o},ot.applySrcQuene=function(t,o,e){var n=this.getSrcQuene(t);n&&n.imgCfg==e&&(this.updateSprite(t,o),this.checkSize(t,this.convertWidth(n.imgCfg.width),this.convertHeight(n.imgCfg.height)),this.setSpriteGrid(n.imgCfg,t),this.clearSrcQuene(t))},ot.clearSrcQuene=function(t){for(var o=0;o<this.srcQuene.length;o++)this.srcQuene[o].node==t&&(this.srcQuene.splice(o,1),o--)},ot.changeSrc=function(t,e,o){var n=this,i=t instanceof cc.Node?t.getComponent(cc.Sprite):t;if(this.addToSrcQuene(i,e,o),e.url)if(-1!=e.url.indexOf("http"))cc.loader.load(e.url,function(t,o){t?console.log(" cc.loader.load ",t):n.applySrcQuene(i,o,e)});else{var r=cc.loader.getRes(e.url);if(r)return void this.applySrcQuene(i,r,e);cc.loader.loadRes(e.url,cc.Texture2D,function(t,o){n.applySrcQuene(i,o,e)})}},ot.updateSprite=function(t,o){var e=new cc.SpriteFrame(o);t.spriteFrame=e},ot.checkSize=function(t,o,e){t.node.width!=o||t.node.height!=e?(t.node.width=o,t.node.height=e):this.unschedule(this.checkSize)},ot.setSpriteGrid=function(t,o){t.grid&&(o.type=cc.Sprite.Type.SLICED,o.spriteFrame.insetLeft=t.grid.left,o.spriteFrame.insetTop=t.grid.top,o.spriteFrame.insetRight=t.grid.right,o.spriteFrame.insetBottom=t.grid.bottom)},ot.changeText=function(t,o){var e;!t||(e=t.getComponent(cc.Label))&&(e.string=o)},ot.createMask=function(t,o){void 0===o&&(o=void 0);var e=moosnow.form.formFactory.maskUrl,n=this.createNode("img_mask");n.addComponent(cc.Sprite),this.changeSrc(n,{url:e},function(){}),t.addChild(n),n.zIndex=-1,this.addStopPropagation(n)},ot.addStopPropagation=function(t){A.isOnlyUI&&A.isPC||t&&t.on(j.TOUCH_START,this.onMaskMouseDown,this)},ot.removeStopPropagation=function(t){t&&t.on(j.TOUCH_START,this.onMaskMouseDown,this)},ot.onMaskMouseDown=function(t){console.log("阻止事件传递, node name ",t.getCurrentTarget().name),t.stopPropagation()},ot.findNodeByName=function(t,o){for(var e=null,n=0;n<t.childrenCount;n++){var i=t.children[n];if(i.name==o){e=i;break}var r=this.findNodeByName(i,o);if(r){e=r;break}}return e},ot.convertWidth=function(t){var o=this.canvasNode.width;return isNaN(t)?o:parseInt(""+t)},ot.convertHeight=function(t){var o=this.canvasNode.height;return isNaN(t)?o:parseInt(""+t)},ot.convertIndex=function(t){return isNaN(t)?0:parseInt(""+t)},ot.srcQuene=[],ot);function ot(){return null!==$&&$.apply(this,arguments)||this}var et,nt=(t(it,et=T),it.parse=function(t){return h(h({},new it),t)},it);function it(){var t=null!==et&&et.apply(this,arguments)||this;return t.horizontalAlign="center",t.color="#ffffff",t.fontSize=32,t.lineHeight=32,t.text="",t}var rt,at=(t(st,rt=T),st.parse=function(t){return h(h({},new st),t)},st);function st(){var t=null!==rt&&rt.apply(this,arguments)||this;return t.mode=cc.ProgressBar.Mode.HORIZONTAL,t}var ct,ht=(t(lt,ct=T),lt);function lt(){var t=null!==ct&&ct.apply(this,arguments)||this;return t.horizontal=!0,t.vertical=!0,t}var mt,ut=(t(pt,mt=T),pt.parse=function(t){return h(h({},new pt),t)},pt);function pt(){var t=null!==mt&&mt.apply(this,arguments)||this;return t.scroll=new ht,t.layout=new Z,t}var dt=(ft.image="image",ft.progressBar="progressBar",ft.text="text",ft.layout="layout",ft.view="view",ft.widget="widget",ft);function ft(){}var yt,vt=(t(gt,yt=O),gt.prototype._createChild=function(t,o){for(var e=0;e<o.length;e++){var n=o[e];this.createNode(t,n)}},gt.prototype.createNode=function(t,o){var e=null,n=null;return o.type==dt.progressBar?(n=at.parse(o),e=tt.createProgressBar(t,n),n.child&&1<n.child.length&&(n.child.splice(0,1),this._createChild(e,n.child))):(o.type==dt.view?(n=ut.parse(o),e=tt.createView(t,n).viewContainer):(e=o.type==dt.text?(n=nt.parse(o),tt.createText(t,n)):o.type==dt.layout?(n=Z.parse(o),tt.createLayout(t,n)):o.type==dt.widget?(n=Y.parse(o),tt.createWidget(t,n)):(n=T.parse(o),tt.createImage(t,n)),o.widget&&tt.createWidget(e,Y.parse(o.widget))),n.child&&0<n.child.length&&this._createChild(e,n.child)),e},gt.prototype._createUINode=function(t,o,e,n){n=n||tt.canvasNode;var i=this.createNode(n,t);t.isMask&&tt.createMask(i,t.maskUrl);var r=new o;return r.initForm(i),this.logicShow(r,i,e),this.addForm2Quene(t.name,i,r),i},gt.prototype.hideFormByLogic=function(t,o){var e=this;this.removeFormByLogic(t,function(t){t instanceof Array?t.forEach(function(t){e.logicHide(t.formLogic,t.formNode,o)}):e.logicHide(t.formLogic,t.formNode,o)})},gt.prototype.logicShow=function(t,o,e){A.isOnlyUI&&A.isPC?console.warn("UI编辑模式，取消业务逻辑"):(t.willShow(e),o.active=!0,t.onShow(e))},gt.prototype.logicHide=function(t,o,e){A.isOnlyUI&&A.isPC?console.warn("UI编辑模式，取消业务逻辑"):(t.willHide(e),o.active=!0,t.onHide(e),o.x=0,o.y=0,o.removeFromParent())},gt.prototype.hideForm=function(t,o,e){var n=this;o?this.removeFormFromQuene(t,o,function(t){n.logicHide(t.formLogic,t.formNode,e)}):this.removeAllFormFromQuene(t,function(t){n.logicHide(t.formLogic,t.formNode,e)})},gt.prototype.showForm=function(n){var t,o,i=this;n.showOnce&&this.hasFormInQuene(n.name)||(n.parent||(n.parent=tt.canvasNode),(t=this.getFormFromCached(n.name))?(n.parent.addChild(t.formNode),this.logicShow(t.formLogic,t.formNode,n.formData),this.addForm2Quene(n.name,t.formNode,t.formLogic)):n.remoteLayout?this.getLayout(function(t){var o,e;t[n.name]&&((o=t[n.name]).name=n.name,e=i._createUINode(o,n.formLogic,n.formData,n.parent),n.callback&&n.callback(e))}):(o=this._createUINode(n.layoutOptions,n.formLogic,n.formData),n.callback&&n.callback(o)))},gt.prototype.createNodeByTemplate=function(n,i,r,a,t,o){var s=this;void 0===t&&(t=!0),void 0===o&&(o=null),a=a||tt.canvasNode;var e=this.getFormFromCached(n);e?(a.addChild(e.formNode),this.logicShow(e.formLogic,e.formNode,r),this.addForm2Quene(n,e.formNode,e.formLogic)):t?this.getTemplates(function(t){var o,e=t[n];e&&((o=T.parse(e)).name=n,s._createUINode(o,i,r,a))}):this._createUINode(o,i,r)},gt.prototype.hideNodeByTemplate=function(t,o,e){var n=this;o?this.removeFormFromQuene(t,o,function(t){n.logicHide(t.formLogic,t.formNode,e)}):this.removeAllFormFromQuene(t,function(t){n.logicHide(t.formLogic,t.formNode,e)})},gt.prototype.getTemplate=function(t,o){yt.prototype.getTemplate.call(this,t,function(t){t.width=tt.convertWidth(t.width),t.height=tt.convertHeight(t.height),o&&o(t)})},gt);function gt(){return null!==yt&&yt.apply(this,arguments)||this}var wt,Ct=(t(bt,wt=H),bt.prototype.downAnim=function(t){t.scale=1,t.runAction(cc.sequence(cc.scaleTo(.1,.7,.7),cc.callFunc(function(){},this)))},bt.prototype.upAnim=function(t,o){var e=this;t.stopAllActions(),t.scale=.7,t.runAction(cc.sequence(cc.scaleTo(.1,1,1),cc.callFunc(function(){e.mDowning=!1,o&&o()},this)))},bt.prototype.getClickQueneItem=function(t){var o=t.getCurrentTarget().uuid,e=this.mClickQuene[o];return e||null},bt.prototype.setClickQueneItem=function(t,o){var e=t.getCurrentTarget().uuid;this.mClickQuene[e]&&(this.mClickQuene[e].clicking=o)},bt.prototype.onTouchStart=function(t){var o=this.getClickQueneItem(t);o&&(o.once&&o.clicking||(moosnow.audio.playClickEffect(),this.downAnim(o.node),this.mDowning||(this.mDowning=!0)))},bt.prototype.onTouchEnd=function(t){var o=this,e=this.getClickQueneItem(t);e&&(e.once&&e.clicking||(this.setClickQueneItem(t,!0),console.log("onTouchEnd"),this.upAnim(e.node,function(){e&&e.callback&&e.callback(),o.setClickQueneItem(t,!1)}),e&&e.stopPropagation&&t.stopPropagation()))},bt.prototype.onTouchCancel=function(t){var o=this,e=this.getClickQueneItem(t);e&&(console.log("onTouchCancel"),this.upAnim(e.node,function(){o.setClickQueneItem(t,!1)}))},bt.prototype.applyClickAnim=function(t,o,e,n){void 0===e&&(e=!1),void 0===n&&(n=!0),A.isOnlyUI&&A.isPC||(t&&t.uuid?(this.mClickQuene[t.uuid]={node:t,stopPropagation:e,callback:o,once:n,clicking:!1},t.on(j.TOUCH_START,this.onTouchStart,this),t.on(j.TOUCH_END,this.onTouchEnd,this),t.on(j.TOUCH_CANCEL,this.onTouchCancel,this)):console.log("缺少对象，无法绑定事件"))},bt.prototype.removeClickAnim=function(t){t&&t.uuid&&(this.mClickQuene[t.uuid]=null,delete this.mClickQuene[t.uuid],t.off(j.TOUCH_START,this.onTouchStart,this),t.off(j.TOUCH_END,this.onTouchEnd,this),t.off(j.TOUCH_CANCEL,this.onTouchCancel,this))},bt.prototype.findNodeByName=function(t,o){return tt.findNodeByName(t,o)},bt);function bt(){var t=null!==wt&&wt.apply(this,arguments)||this;return t.mDowning=!1,t.mClickQuene={},t}var Nt,Ft=(t(At,Nt=Ct),Object.defineProperty(At.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),At.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnBack,function(){t.onBack()}),this.applyClickAnim(this.btnContinue,function(){t.onBack()})},At.prototype.removeListener=function(){this.removeClickAnim(this.btnBack)},At.prototype.willShow=function(t){Nt.prototype.willShow.call(this,t),moosnow.platform.stopRecord(function(){var o=moosnow.platform.getSystemInfoSync();moosnow.http.getAllConfig(function(t){moosnow.platform.showShareButton({left:o.windowWidth-t.shareBtnWidth,top:o.windowHeight-70})}),moosnow.platform.hideBanner(),moosnow.platform.hideShareButton()})},At.prototype.onShow=function(t){this.addListener()},At.prototype.willHide=function(){this.removeListener()},At.prototype.onBack=function(){this.hideForm(),this.FormData.callback&&this.FormData.callback()},At);function At(){var t=null!==Nt&&Nt.apply(this,arguments)||this;return t.btnBack=null,t.btnContinue=null,t}var kt,Tt=(t(St,kt=Ct),Object.defineProperty(St.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),St.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnContinue,function(){t.onContinue()}),this.applyClickAnim(this.btnHome,function(){t.onToHome()}),this.applyClickAnim(this.btnReplay,function(){t.onReplay()})},St.prototype.removeListener=function(){this.removeClickAnim(this.btnContinue),this.removeClickAnim(this.btnHome),this.removeClickAnim(this.btnReplay)},St.prototype.willShow=function(t){kt.prototype.willShow.call(this,t),this.addListener(),moosnow.platform.hideBanner()},St.prototype.willHide=function(t){kt.prototype.willHide.call(this,t),this.removeListener()},St.prototype.onShow=function(t){kt.prototype.onShow.call(this,t),moosnow.platform.pauseRecord()},St.prototype.onContinue=function(){this.hideForm(),this.FormData.callback&&this.FormData.callback()},St.prototype.onToHome=function(){this.hideForm(),moosnow.platform.stopRecord(),this.FormData.homeCallback&&this.FormData.homeCallback()},St.prototype.onReplay=function(){this.hideForm(),moosnow.platform.stopRecord(function(){moosnow.platform.startRecord()}),this.FormData.replayCallback&&this.FormData.replayCallback()},St);function St(){var t=null!==kt&&kt.apply(this,arguments)||this;return t.btnContinue=null,t.btnHome=null,t.btnReplay=null,t.isMask=!1,t}var xt=(Dt.randomNumBoth=function(t,o){var e=o-t,n=Math.random();return t+Math.round(n*e)},Dt.probabilitys=function(t){for(var o=0,e=c(t),n=0,i=0;i<e.length;i++)n+=e[i];if(100!=n)throw"所有概率值总和不等于100%";for(var r=new Array,i=0;i<e.length;i++){for(var a=e[i],s=0;s<a;s++)r.push(o);o++}return r[this.randomNumBoth(0,99)]},Dt);function Dt(){}var Lt,Ot=(t(It,Lt=Ct),It);function It(){return null!==Lt&&Lt.apply(this,arguments)||this}var Pt,_t="__video_end",Bt="__video_not_end",Et="__video_error",Rt="视频正在加载中,请稍后",Vt="请完整观看完视频！",Ht=(t(Mt,Pt=Ot),Mt.prototype.addListener=function(){var t=this;this[this.uncheckedName]&&this.applyClickAnim(this[this.uncheckedName],function(){t.checkToggle()}),this[this.checkedName]&&this.applyClickAnim(this[this.checkedName],function(){t.checkToggle()})},Mt.prototype.removeListener=function(){this[this.checkedName]&&this.removeClickAnim(this[this.checkedName]),this[this.uncheckedName]&&this.removeClickAnim(this[this.uncheckedName])},Mt.prototype.onReceive=function(){var o=this;this.mCheckedVideo?moosnow.platform.showVideo(function(t){t==_t?o.FormData.videoCallback&&o.FormData.videoCallback():t==Et?moosnow.form.showToast(Rt):moosnow.form.showToast(Vt)}):this.FormData.callback&&this.FormData.callback()},Mt.prototype.checkToggle=function(){if(this.mCheckBoxMistouch)return this.mClickNum++,this.mClickNum==this.mCheckBoxVideoNum&&moosnow.platform.showVideo(function(){}),this.mClickNum>=this.mCanNum&&(this.mCheckedVideo=!this.mCheckedVideo,this.updateCheckbox()),void this.checkCallback();this.mCheckedVideo=!this.mCheckedVideo,this.updateCheckbox(),this.checkCallback()},Mt.prototype.onShow=function(t){var o=this;Pt.prototype.onShow.call(this,t),moosnow.http.getAllConfig(function(t){o.mCanNum=xt.probabilitys(t.checkBoxProbabilitys)+1,o.mCheckBoxVideoNum=t&&!isNaN(t.checkBoxVideoNum)?t.checkBoxVideoNum:3,o.mCheckBoxMistouch=1==t.checkBoxMistouch}),this.addListener(),this.updateCheckbox(),this.checkCallback()},Mt.prototype.updateCheckbox=function(){this[this.checkedName]&&(this[this.checkedName].active=this.mCheckedVideo),this[this.uncheckedName]&&(this[this.uncheckedName].active=!this.mCheckedVideo)},Mt.prototype.checkCallback=function(){this.toggleCallback&&this.toggleCallback(this.mCheckedVideo)},Mt.prototype.willHide=function(){this.removeListener()},Mt);function Mt(t,o,e,n){void 0===t&&(t=!0);var i=Pt.call(this)||this;return i.checkedName="checked",i.uncheckedName="unchecked",i.mCheckedVideo=!0,i.mCanNum=0,i.mCheckBoxMistouch=!1,i.mClickNum=0,i.mCheckBoxVideoNum=3,i.toggleCallback=o,i.mCheckedVideo=t,e&&(i.checkedName=e),n&&(i.uncheckedName=n),i[i.checkedName]=null,i[i.uncheckedName]=null,i}var Qt,Ut=(t(zt,Qt=Ct),Object.defineProperty(zt.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),zt.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnContinue,function(){t.onReceive()})},zt.prototype.removeListener=function(){this.removeClickAnim(this.btnContinue)},zt.prototype.onReceive=function(){var o=this;this.mCheckedVideo?moosnow.platform.showVideo(function(t){t==moosnow.VIDEO_STATUS.END?(o.hideForm(),o.FormData.videoCallback&&o.FormData.videoCallback()):t==moosnow.VIDEO_STATUS.ERR?moosnow.form.showToast(Rt):moosnow.form.showToast(Vt)}):this.FormData.callback&&this.FormData.callback()},zt.prototype.onShow=function(t){Qt.prototype.onShow.call(this,t),this.mLevelCoinNum=this.FormData.coinNum,this.mLevelShareCoinNum=this.FormData.coinNum,this.videoText.getComponent(cc.Label).string=""+this.FormData.videoText,this.coinNum.getComponent(cc.Label).string=""+A.formatMoney(this.mLevelCoinNum),this.addListener(),moosnow.platform.stopRecord(),moosnow.platform.showBanner()},zt.prototype.willHide=function(t){Qt.prototype.willHide.call(this,t),this.removeListener(),moosnow.platform.hideBanner()},zt);function zt(){var o=null!==Qt&&Qt.apply(this,arguments)||this;return o.checked=null,o.unchecked=null,o.btnContinue=null,o.coinNum=null,o.videoText=null,o.mCheckedVideo=!1,o.formComponents=[new Ht(o.mCheckedVideo,function(t){o.mCheckedVideo=t})],o.mLevelCoinNum=0,o.mLevelShareCoinNum=0,o}var Wt,jt=(t(qt,Wt=Ct),qt.prototype.onMaskMouseDown=function(t){t.stopPropagation()},qt.prototype.willShow=function(t){Wt.prototype.willShow.call(this),this.node.on(j.TOUCH_START,this.onMaskMouseDown,this),this.node.zIndex=cc.macro.MAX_ZINDEX,this.msgText.getComponent(cc.Label).string=t,this.node.active=!0,this.node.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1))),this.scheduleOnce(this.hide,1)},qt.prototype.willHide=function(t){Wt.prototype.willHide.call(this,t),this.node.off(j.TOUCH_START,this.onMaskMouseDown,this)},qt.prototype.hide=function(){this.hideForm()},qt);function qt(){var t=null!==Wt&&Wt.apply(this,arguments)||this;return t.msgText=null,t}var Gt,Zt=(t(Xt,Gt=Ct),Object.defineProperty(Xt.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),Xt.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnVideo,function(){t.onVideoTry()}),this.applyClickAnim(this.btnNext,function(){t.onNext()}),this.applyClickAnim(this.btnTry,function(){t.onTextTry()})},Xt.prototype.removeListener=function(){this.removeClickAnim(this.btnVideo),this.removeClickAnim(this.btnNext),this.removeClickAnim(this.btnTry)},Xt.prototype.onShow=function(t){Gt.prototype.onShow.call(this,t),tt.changeSrc(this.logo,{url:this.FormData.skinUrl,width:this.logo.width,height:this.logo.height}),this.addListener()},Xt.prototype.onHide=function(t){Gt.prototype.onHide.call(this,t),this.removeListener()},Xt.prototype.onVideoTry=function(){var o=this;moosnow.platform.showVideo(function(t){t==_t?(o.hideForm(),o.FormData.videoCallback&&o.FormData.videoCallback()):t==Et?moosnow.form.showToast(Rt):t==Bt&&moosnow.form.showToast(Vt)})},Xt.prototype.onNext=function(){this.hideForm(),this.FormData.callback&&this.FormData.callback()},Xt.prototype.onTextTry=function(){this.mCheckedVideo?this.onVideoTry():this.onNext()},Xt);function Xt(){var o=null!==Gt&&Gt.apply(this,arguments)||this;return o.logo=null,o.btnVideo=null,o.btnNext=null,o.btnTry=null,o.mCheckedVideo=!1,o.formComponents=[new Ht(o.mCheckedVideo,function(t){o.mCheckedVideo=t,o.btnNext&&(o.btnNext.active=t),o.btnTry&&(o.btnTry.active=!t)})],o}var Kt,Yt=(t(Jt,Kt=Ct),Object.defineProperty(Jt.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),Jt.prototype.addListener=function(){this.node.on(j.TOUCH_START,this.hideForm,this),tt.addStopPropagation(this.bg)},Jt.prototype.removeListener=function(){this.node.off(j.TOUCH_START,this.hideForm,this),tt.removeStopPropagation(this.bg)},Jt.prototype.willShow=function(t){Kt.prototype.willShow.call(this,t),this.addListener()},Jt.prototype.willHide=function(t){Kt.prototype.willShow.call(this,t),this.removeListener()},Jt.prototype.vibrateSwitch=function(t){moosnow.data.setVibrateSetting(t),this.FormData.vibrateCallback&&this.FormData.vibrateCallback(t)},Jt.prototype.musicSwitch=function(t){moosnow.audio.isMute=t,this.FormData.musicCallback&&this.FormData.musicCallback(t)},Jt);function Jt(){var o=null!==Kt&&Kt.apply(this,arguments)||this;return o.bg=null,o.formComponents=[new Ht(moosnow.data.getVibrateSetting(),function(t){o.vibrateSwitch(t)},"vibrateOn","vibrateOff"),new Ht(moosnow.audio.isMute,function(t){o.musicSwitch(t)},"musicOn","musicOff")],o}var $t,to=(t(oo,$t=Ct),Object.defineProperty(oo.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),oo.prototype.willShow=function(t){$t.prototype.willShow.call(this,t),this.initItem(t),this.addListener()},oo.prototype.willHide=function(t){$t.prototype.willHide.call(this,t),this.removeListener()},oo.prototype.addListener=function(){var t=this;this.applyClickAnim(this.node,function(){t.onCheck()}),moosnow.event.addListener(i.PRIZE_BOX_UNLOCAK,this,this.onCheckChange)},oo.prototype.removeListener=function(){this.removeClickAnim(this.node),moosnow.event.removeListener(i.PRIZE_BOX_UNLOCAK,this)},oo.prototype.initItem=function(t){this.coinNum.active=0<t.coinNum;var o=moosnow.data.getUserPrizeBoxById(t.idx);o?(this.coinNum.getComponent(cc.Label).string=""+A.formatMoney(o.coinNum),this.opend.active=!0,this.lockd.active=!1,this.video.active=!1):(this.opend.active=!1,this.lockd.active=!0,this.video.active=this.FormData.isVideo),this.checkdBg.active=!1},oo.prototype.onCheckChange=function(t){var o=moosnow.data.getUserPrizeBoxById(this.FormData.idx);o?(this.coinNum.active=!0,this.coinNum.getComponent(cc.Label).string=""+A.formatMoney(o.coinNum),this.opend.active=!0,this.lockd.active=!1,this.video.active=!1):(this.coinNum.active=!1,this.video.active=this.FormData.isVideo,this.opend.active=!1,this.lockd.active=!0)},oo.prototype.onCheck=function(){var o=this;this._opening||(this._opening=!0,this.FormData.videoNum?moosnow.platform.showVideo(function(t){switch(o._opening=!1,t){case Bt:moosnow.form.showToast(Vt);break;case Et:moosnow.form.showToast(Rt);break;case _t:moosnow.data.lockPrizeBox(o.FormData.idx,1,o.FormData.coinNum),moosnow.event.sendEventImmediately(i.PRIZE_BOX_UNLOCAK,o.FormData)}}):(0<moosnow.data.getPrizeKey()?(moosnow.data.addPrizeKey(-1),moosnow.data.lockPrizeBox(this.FormData.idx,0,this.FormData.coinNum)):(this._opening=!1,moosnow.form.showToast("钥匙不足")),moosnow.event.sendEventImmediately(i.PRIZE_BOX_UNLOCAK,this.FormData)))},oo);function oo(){var t=null!==$t&&$t.apply(this,arguments)||this;return t.checkdBg=null,t.opend=null,t.lockd=null,t.video=null,t.coinNum=null,t._opening=!1,t}var eo,no=(t(io,eo=Ct),Object.defineProperty(io.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),io.prototype.onShow=function(t){console.log("this.mTryFromVideo 1 ",this.mTryFromVideo),eo.prototype.onShow.call(this,t),this.boxLayout.getComponent(cc.Layout).type=cc.Layout.Type.GRID,console.log("this.mTryFromVideo 2 ",this.mTryFromVideo),this.btnNext.active=!this.mTryFromVideo,this.btnReceive.active=this.mTryFromVideo;for(var o=0,e=0;e<this.FormData.rowNum;e++)for(var n=0;n<this.FormData.colNum;n++){var i=A.randomNumBoth(this.FormData.coinNum[0],this.FormData.coinNum[1]),r=A.randomNumBoth(this.FormData.videoCoinNum[0],this.FormData.videoCoinNum[1]),a=this.FormData.videoNum&&-1!=this.FormData.videoNum.indexOf(o);moosnow.form.formFactory.createNodeByTemplate("boxItem",to,{coinNum:i,videoCoinNum:r,isVideo:a,idx:o},this.boxLayout),o++}this.addListener(),this.updateKeyNum()},io.prototype.onHide=function(t){eo.prototype.onHide.call(this,t),moosnow.form.formFactory.hideNodeByTemplate("boxItem",null),this.removeListener()},io.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnNext,function(){t.nextForm()}),this.applyClickAnim(this.btnReceive,function(){t.onReceive()}),moosnow.event.addListener(i.PRIZE_BOX_UNLOCAK,this,this.onPrizeBoxUnLock)},io.prototype.removeListener=function(){this.removeClickAnim(this.btnNext),this.removeClickAnim(this.btnReceive),moosnow.event.removeListener(i.PRIZE_BOX_UNLOCAK,this)},io.prototype.onPrizeBoxUnLock=function(t){this.btnReceive.active=!0,this.updateKeyNum(),this.FormData.openCallback&&this.FormData.openCallback(t.coinNum)},io.prototype.onReceive=function(){var o=this;this._Receiveing||(this._Receiveing=!0,this.mTryFromVideo?(this._Receiveing=!1,moosnow.platform.showVideo(function(t){switch(t){case Bt:moosnow.form.showToast(Vt);break;case Et:moosnow.form.showToast(Rt);break;case _t:moosnow.data.addPrizeKey(3),o.updateKeyNum()}})):this.nextForm())},io.prototype.nextForm=function(){moosnow.data.clearPrizeBox(),moosnow.data.clearPrizeKey(),this._Receiveing=!1,this.hideForm(),this.FormData.callback&&this.FormData.callback()},io.prototype.updateKeyNum=function(){this.keyNum.getComponent(cc.Label).string=""+moosnow.data.getPrizeKey()},io);function io(){var o=null!==eo&&eo.apply(this,arguments)||this;return o.boxLayout=null,o.btnReceive=null,o.btnNext=null,o.keyNum=null,o.mTryFromVideo=!0,o.formComponents=[new Ht(o.mTryFromVideo,function(t){o.mTryFromVideo=t,o.btnNext.active=!t,o.btnReceive.active=t})],o._Receiveing=!1,o}var ro,ao=(t(so,ro=Ct),Object.defineProperty(so.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),so.prototype.onShow=function(t){ro.prototype.onShow.call(this,t),this.addListener(),this.coinNum.getComponent(cc.Label).string=""+A.formatMoney(this.FormData.shareCoinNum)},so.prototype.onHide=function(t){ro.prototype.onHide.call(this,t),this.removeListener()},so.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnShare,function(){t.onShareVideo()}),this.applyClickAnim(this.btnNext,function(){t.onNext()})},so.prototype.removeListener=function(){this.removeClickAnim(this.btnShare),this.removeClickAnim(this.btnNext)},so.prototype.onNext=function(){this.hideForm(),this.FormData.callback&&this.FormData.callback()},so.prototype.onShareVideo=function(){var e=this;moosnow.http.getAllConfig(function(t){var o;t&&1!=t.shareFormVideo?2==t.shareFormVideo?e.onShare():(o=t&&t.shareFormVideoPrecent?parseFloat(t.shareFormVideoPrecent):.5,A.randomNumBoth(0,100)/100<o?e.onVideo():e.onShare()):e.onVideo()})},so.prototype.onVideo=function(){var o=this;moosnow.platform.showVideo(function(t){t==moosnow.VIDEO_STATUS.END?(o.hideForm(),o.FormData.shareCallback&&o.FormData.shareCallback(!0)):t==moosnow.VIDEO_STATUS.NOTEND?moosnow.form.showToast(moosnow.VIDEO_MSG.NOTEND):moosnow.form.showToast(moosnow.VIDEO_MSG.ERR)})},so.prototype.onShare=function(){var o=this;moosnow.platform.share({channel:moosnow.SHARE_CHANNEL.VIDEO},function(t){o.hideForm(),o.FormData.shareCallback&&o.FormData.shareCallback(t),console.log("分享结束",t)},function(t){o.hideForm(),o.FormData.shareCallback&&o.FormData.shareCallback(t)})},so);function so(){var t=null!==ro&&ro.apply(this,arguments)||this;return t.btnShare=null,t.btnNext=null,t.coinNum=null,t}var co,ho=(t(lo,co=Ct),lo.prototype.addEvent=function(){this.btnReceive.on(j.TOUCH_START,this.onLogoUp,this),this.btnReceive.on(j.TOUCH_END,this.onBannerClick,this)},lo.prototype.removeEvent=function(){this.btnReceive.off(j.TOUCH_START,this.onLogoUp,this),this.btnReceive.off(j.TOUCH_END,this.onBannerClick,this),moosnow.event.removeListener(i.ON_PLATFORM_SHOW,this)},lo.prototype.onLogoUp=function(){this.logo.position=this.mEndPos},lo.prototype.onLogoDown=function(){this.logo.position=this.mBeginPos},lo.prototype.initPos=function(){this.mBeginPos=this.logo.position.clone(),this.mEndPos=this.mBeginPos.add(new cc.Vec2(0,50))},Object.defineProperty(lo.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),lo.prototype.willShow=function(t){var o=this;co.prototype.willShow.call(this,t),this.btnReceive.active=!0,this.initPos(),this.mCurrentNum=0,this.mNavigateIndex=A.randomNumBoth(3,this.mMaxNum-2),this.addEvent(),this.schedule(this.subProgress,.1),moosnow.form.showAd(s,null),tt.changeSrc(this.logo,{url:this.FormData.url,width:this.logo.width,height:this.logo.height}),this.mBannerShow=!1,moosnow.http.getAllConfig(function(t){o.mBannerClickType=t.bannerClickType}),this.schedule(this.onFwUpdate,.16)},lo.prototype.willHide=function(){this.unschedule(this.subProgress),this.unschedule(this.resetProgress),this.removeEvent(),this.unschedule(this.onFwUpdate)},lo.prototype.subProgress=function(){this.mCurrentNum-=.1,this.mCurrentNum<0&&(this.mCurrentNum=0)},lo.prototype.bannerClickCallback=function(t){t&&(this.unschedule(this.onHideBanner),this.unschedule(this.resetProgress),moosnow.platform.hideBanner(),this.mBannerShow=!1,this.hideForm(),this.FormData&&this.FormData.callback&&this.FormData.callback())},lo.prototype.onBannerClick=function(){var o=this;this.onLogoDown(),this.mCurrentNum+=1,this.mCurrentNum>=this.mNavigateIndex&&(this.mBannerShow||(this.mShowTime=Date.now(),this.mBannerShow=!0,moosnow.platform.showBanner(!0,function(t){console.log("banner click callback ",t),o.bannerClickCallback(t)}),1==this.mBannerClickType?(this.unschedule(this.onHideBanner),this.scheduleOnce(this.onHideBanner,2)):2==this.mBannerClickType&&(this.unschedule(this.resetProgress),this.scheduleOnce(this.resetProgress,2)))),this.mCurrentNum>=this.mMaxNum&&(moosnow.platform.hideBanner(),this.mBannerShow=!1,this.hideForm(),this.FormData&&this.FormData.callback&&this.FormData.callback(!0))},lo.prototype.resetProgress=function(){this.mCurrentNum=0,moosnow.platform.hideBanner(),this.mBannerShow=!1},lo.prototype.onHideBanner=function(){moosnow.platform.hideBanner()},lo.prototype.onFwUpdate=function(){this.clickProgress.getComponent(cc.ProgressBar).progress=this.mCurrentNum/this.mMaxNum},lo);function lo(){var t=null!==co&&co.apply(this,arguments)||this;return t.clickProgress=null,t.btnReceive=null,t.logo=null,t.mMaxNum=10,t.mCurrentNum=0,t.mNavigateIndex=0,t.mBannerShow=!1,t.mShowTime=0,t.mBannerClickType=0,t}var mo,uo=(t(po,mo=Ct),po.prototype.addListener=function(){this.logo.on(j.TOUCH_END,this.onClickAd,this)},po.prototype.removeListener=function(){this.logo.off(j.TOUCH_END,this.onClickAd,this)},po.prototype.initPosition=function(t){},po.prototype.willShow=function(t){mo.prototype.willShow.call(this,t),this.mAdItem=t,this.addListener()},po.prototype.refreshImg=function(t){this.mAdItem=t,this.updateUI()},po.prototype.updateUI=function(){var t=this,o=this.logo,e=o.width,n=o.height;tt.changeSrc(this.logo,{url:this.mAdItem.img,width:e,height:n},function(){t.logo.width=e,t.logo.height=n}),tt.changeText(this.title,this.mAdItem.title)},po.prototype.onClickAd=function(){var t,o=this,e=this.mAdItem;this.FormData&&this.FormData.refresh&&(t=this.findNextAd())&&(t.refresh&&moosnow.event.sendEventImmediately(i.AD_VIEW_REFRESH,{current:e,next:t}),this.refreshImg(t)),moosnow.platform.navigate2Mini(e,function(){},function(){o.mAdItem&&o.mAdItem.onCancel&&o.mAdItem.onCancel(e)})},po.prototype.findNextAd=function(){if(!this.FormData.source)return null;if(!this.FormData.showIds)return null;for(var t=0;t<this.FormData.source.length;t++){for(var o=!1,e=0;e<this.FormData.showIds.length;e++)this.FormData.showIds[e].appid==this.FormData.source[t].appid&&this.FormData.showIds[e].position==this.FormData.source[t].position&&(o=!0);if(!o)return this.FormData.source[t]}return null},po.prototype.onAdViewChange=function(t){if(this.FormData.showIds&&this.FormData.source){for(var o=t.current,e=t.next,n=this.FormData.showIds,i=this.FormData.source,r=0;r<n.length;r++)o.appid==n[r].appid&&o.position==n[r].position&&(this.FormData.showIds[r]=e.appid);for(r=0;r<i.length;r++)if(e.appid==i[r].appid){this.FormData.source.splice(r,1),this.FormData.source.push(o);break}}},po.prototype.onShow=function(t){mo.prototype.onShow.call(this,t),this.updateUI(),moosnow.event.addListener(i.AD_VIEW_REFRESH,this,this.onAdViewChange)},po.prototype.onHide=function(t){mo.prototype.onHide.call(this,t),this.mAdItem&&(this.mAdItem.onCancel=null),this.removeListener(),moosnow.event.removeListener(i.AD_VIEW_REFRESH,this)},po);function po(){var t=null!==mo&&mo.apply(this,arguments)||this;return t.logo=null,t.title=null,t.animLogo=null,t.nameBg=null,t}var fo,yo=(t(vo,fo=Ct),vo.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnBack,function(){t.onBack()}),this.applyClickAnim(this.exportClose,function(){t.onNavigate()}),this.applyClickAnim(this.btnSideShow,function(){t.sideOut()}),this.applyClickAnim(this.btnSideHide,function(){t.sideIn()}),moosnow.event.addListener(i.AD_VIEW_CHANGE,this,this.onAdChange)},vo.prototype.removeListener=function(){this.removeClickAnim(this.btnBack),this.removeClickAnim(this.exportClose),this.removeClickAnim(this.btnSideShow),this.removeClickAnim(this.btnSideHide),moosnow.event.removeListener(i.AD_VIEW_CHANGE,this)},vo.prototype.onAdChange=function(t){this.displayAd(!1),this.mTempPoints=t&&t.points?t.points:null,this.mTempTempletes=t&&t.templetes?t.templetes:null,this.mShowAd||(this.mShowAd=t.showAd,this.mBackCall=t.callback),t.showAd!=w&&(this.mPrevShowAd=this.mShowAd,this.mPrevBackCall=this.mBackCall),t.showAd==w&&(t.showAd=this.mPrevShowAd,t.callback=this.mPrevBackCall),this.displayChange(t.showAd,t.callback),isNaN(t.zIndex)?this.node.zIndex=cc.macro.MAX_ZINDEX:this.node.zIndex=t.zIndex},vo.prototype.onBack=function(){this.mBackCall&&this.mBackCall()},Object.defineProperty(vo.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),vo.prototype.loadAd=function(o){var e=this;this.mAdData?o(this.mAdData.indexLeft):(this.loadNum=0,moosnow.form.formFactory.getLayout(function(){e.checkLoad(o)}),moosnow.form.formFactory.getTemplates(function(){e.checkLoad(o)}),moosnow.ad.getAd(function(t){e.mAdData=t,e.checkLoad(o)}))},vo.prototype.onAdCancel=function(){moosnow.form.showAd(m|p|u,function(){moosnow.form.showAd(w,function(){})})},vo.prototype.checkLoad=function(t){this.loadNum++,this.loadNum==this.loadManNum&&t(this.mAdData.indexLeft)},vo.prototype.onRandomNavigate=function(){var t=this.mAdData.indexLeft[A.randomNumBoth(0,this.mAdData.indexLeft.length-1)];moosnow.platform.navigate2Mini(t,function(){},function(){})},vo.prototype.onNavigate=function(){var o=this;moosnow.http.getAllConfig(function(t){t&&1==t.exportBtnNavigate?o.onRandomNavigate():o.onBack()})},vo.prototype.sideOut=function(){var t=this,o=moosnow.platform.getSystemInfoSync(),e=0,n=0;o&&(e=o.statusBarHeight||0,n=o.notchHeight||0),this.sideView.node.runAction(cc.sequence(cc.moveTo(1,e+n+this.sideView.node.width+20,0),cc.callFunc(function(){t.btnSideShow.active=!1,t.btnSideHide.active=!0})))},vo.prototype.sideIn=function(){var t=this;this.sideView.node.runAction(cc.sequence(cc.moveTo(1,0,0),cc.callFunc(function(){t.btnSideShow.active=!0,t.btnSideHide.active=!1})))},vo.prototype.pushScroll=function(t,o){o.type==cc.Layout.Type.GRID?t.vertical?this.mScrollVec.push({scrollView:t,move2Up:!1}):this.mScrollVec.push({scrollView:t,move2Left:!1}):o.type==cc.Layout.Type.HORIZONTAL?this.mScrollVec.push({scrollView:t,move2Left:!1}):o.type==cc.Layout.Type.VERTICAL&&this.mScrollVec.push({scrollView:t,move2Up:!1})},vo.prototype.addAd=function(t){this.mShowAd|=t},vo.prototype.removeAd=function(t){this.hasAd(t)&&(this.mShowAd^=t)},vo.prototype.hasAd=function(t){return(this.mShowAd&t)==t},vo.prototype.showClose=function(t){this.exportClose.active=!1,this.exportCloseTxt.active=!1,this.btnBack.active=!1,this.unschedule(this.onWaitShow),t&&this.hasAd(u)?this.hasAd(d)?(this.mSecond=3,this.onWaitShow(),this.schedule(this.onWaitShow,1)):(this.exportClose.active=!0,this.btnBack.active=!0,this.exportCloseTxt.active=!1):(this.exportClose.active=!1,this.btnBack.active=!1,this.exportCloseTxt.active=!1)},vo.prototype.onWaitShow=function(){if(--this.mSecond,this.exportCloseTxt.active=!0,this.mSecond<=0)return this.exportClose.active=!0,this.btnBack.active=!0,this.exportCloseTxt.active=!1,void this.unschedule(this.onWaitShow);tt.changeText(this.exportCloseTxt,"剩余"+this.mSecond+"秒可关闭")},vo.prototype.setPosition=function(t,o,e,n){void 0===o&&(o=""),void 0===n&&(n=!1);var i=A.deepCopy(t);return i.forEach(function(t){t.position=o,t.onCancel=e,t.refresh=n}),i},vo.prototype.initFloatAd=function(t){var r,a,o,s,c,h=this;0!=this.mAdData.indexLeft.length&&(r=this.setPosition(this.mAdData.indexLeft,"浮动ICON",t,!0),a=[],o=this.mTempPoints||this.FormData.floatPositon,s=this.mTempTempletes||this.FormData.floatTempletes,c=A.randomNumBoth(0,r.length-1),o.forEach(function(t,o){var e=(c+o)%(r.length-1),n=r[e];a.push({appid:n.appid,position:n.position,index:e});var i=s.length-1>o?s[o]:s[0];console.log("initFloatAd",t.x,t.y),n.x=t.x,n.y=t.y,n.source=r,n.showIds=a,n.index=o,moosnow.form.formFactory.createNodeByTemplate(i,uo,n,h.floatContainer)}),this.updateFloat(r),this.schedule(this.updateFloat,this.mFloatRefresh,[r]),this.floatRuning=!1)},vo.prototype.removeFloatAd=function(){this.floatContainer.children.forEach(function(t){t.stopAllActions()});var t=this.FormData.floatTempletes;this.mTempTempletes&&(t=t.concat(this.mTempTempletes)),t.forEach(function(t){moosnow.form.formFactory.hideNodeByTemplate(t,null)}),this.unschedule(this.updateFloat)},vo.prototype.floatAnim=function(){var t;this.floatRuning||(t=this.mTempTempletes||this.FormData.floatTempletes,this.floatContainer.childrenCount>=t.length&&(this.floatRuning=!0),this.floatContainer.children.forEach(function(t){t.stopAllActions(),t.runAction(cc.sequence(cc.rotateTo(.3,10),cc.rotateTo(.6,-10),cc.rotateTo(.3,0),cc.scaleTo(.3,.8),cc.scaleTo(.3,1)).repeatForever())}))},vo.prototype.updateFloat=function(t){var e=this,n=this.mTempTempletes||this.FormData.floatTempletes;this.floatContainer.children.forEach(function(o){n.forEach(function(t){moosnow.form.formFactory.getKVsByName(t).forEach(function(t){t.formNode==o&&(t.formLogic.FormData.index=(t.formLogic.FormData.index+e.floatContainer.childrenCount)%(e.mAdData.indexLeft.length-1),t.formLogic.refreshImg(h(h({},e.mAdData.indexLeft[t.formLogic.FormData.index]),{onCancel:t.formLogic.FormData.onCancel})))})})})},vo.prototype.initFiexdView=function(e,t,n,o){if(this.mAdData){e.removeAllChildren();for(var i=this.setPosition(this.mAdData.indexLeft,t,o,!0),r=[],a=[],s=0;s<8;s++){var c=i.length>s?i[s]:i[0];a.push({appid:c.appid,position:c.position,index:s}),r.push(c)}r.forEach(function(t){var o=h(h({},t),{showIds:a,source:i});moosnow.form.formFactory.createNodeByTemplate(n,uo,o,e)})}},vo.prototype.initView=function(t,e,o,n,i,r){this.hideAllAdNode(n,e),(r=r||this.setPosition(this.mAdData.indexLeft,o,i)).forEach(function(t,o){moosnow.form.formFactory.createNodeByTemplate(n,uo,t,e)}),this.pushScroll(t,e.getComponent(cc.Layout))},vo.prototype.hideAllAdNode=function(t,o){if(o)for(var e=0;e<o.childrenCount;e++)moosnow.form.formFactory.hideNodeByTemplate(t,o.children[e]),e--},vo.prototype.onFwUpdate=function(){this.floatAnim(),this.scrollMove()},vo.prototype.scrollMove=function(){for(var t=0;t<this.mScrollVec.length;t++){var o,e,n,i,r=this.mScrollVec[t],a=r.scrollView;a.isScrolling()||(e=(o=a.getMaxScrollOffset()).y/2+20,n=o.x/2+20,i=a.getContentPosition(),1==r.move2Up?(i.y>e&&(r.move2Up=!1),r.scrollView.setContentPosition(new cc.Vec2(i.x,i.y+this.mMoveSpeed))):0==r.move2Up&&(i.y<-e&&(r.move2Up=!0),r.scrollView.setContentPosition(new cc.Vec2(i.x,i.y-this.mMoveSpeed))),1==r.move2Left?(i.x>n&&(r.move2Left=!1),r.scrollView.setContentPosition(new cc.Vec2(i.x+this.mMoveSpeed,i.y))):0==r.move2Left&&(i.x<-n&&(r.move2Left=!0),r.scrollView.setContentPosition(new cc.Vec2(i.x-this.mMoveSpeed,i.y))))}},vo.prototype.willShow=function(t){fo.prototype.willShow.call(this,t),this.floatRuning=!1,this.addListener(),this.mAdItemList=[],this.mScrollVec=[],this.displayChange(t.showAd,t.callback)},vo.prototype.willHide=function(){fo.prototype.willShow.call(this),this.removeListener(),this.unschedule(this.onFwUpdate)},vo.prototype.displayChange=function(t,o){void 0===o&&(o=null),this.mShowAd=t,this.displayAd(!0),this.mBackCall=o},vo.prototype.displayAd=function(t){var o=this;this.endContainer.active=t&&this.hasAd(y),this.endContainer.active&&this.initEnd(),this.bannerContainer.active=t&&this.hasAd(a),this.topContainer.active=t&&this.hasAd(g),this.floatContainer.active=t&&this.hasAd(l),this.floatContainer.active&&this.initFloatAd(this.onAdCancel),this.floatContainer.active||this.removeFloatAd(),this.leftContainer.active=this.rightContainer.active=t&&this.hasAd(f),this.exportContainer.active=t&&this.hasAd(m),this.rotateContainer.active=t&&this.hasAd(v),this.rotateContainer.active&&this.initRotate(this.initRotate),this.rotateContainer.active||this.disableRotate(),this.formMask.active=t&&this.hasAd(p),t&&this.hasAd(m)&&moosnow.http.getAllConfig(function(t){1==t.exportAutoNavigate&&moosnow.platform.navigate2Mini(o.mAdData.indexLeft[A.randomNumBoth(0,o.mAdData.indexLeft.length-1)])}),this.showClose(t)},vo.prototype.onShow=function(t){var o=this;fo.prototype.onShow.call(this,t),moosnow.http.getAllConfig(function(t){t&&(isNaN(t.adScrollViewSpeed)||(o.mMoveSpeed=parseFloat(t.adScrollViewSpeed)))}),this.loadAd(function(){o.schedule(o.onFwUpdate,.016),o.initBanner(),o.initExport(),o.initTop(),o.initLeftRight(),o.FormData&&o.FormData.callback&&o.FormData.callback()})},vo.prototype.initBanner=function(){var t=this.bannerContainer_layout.getComponent(cc.Layout),o=this.bannerContainer_scroll.getComponent(cc.ScrollView);t.type=cc.Layout.Type.HORIZONTAL,t.resizeMode=cc.Layout.ResizeMode.CONTAINER,this.initView(o,this.bannerContainer_layout,"banner","bannerAdItem",this.onAdCancel)},vo.prototype.initTop=function(){var t=this.topContainer_layout.getComponent(cc.Layout),o=this.topContainer_scroll.getComponent(cc.ScrollView);t.type=cc.Layout.Type.HORIZONTAL,t.resizeMode=cc.Layout.ResizeMode.CONTAINER,this.initView(o,this.topContainer_layout,"top","bannerAdItem",this.onAdCancel)},vo.prototype.initLeftRight=function(){var t=A.deepCopy(this.mAdData.indexLeft),o=t.length/2,e=t.slice(0,o),n=t.slice(o,t.length),i=this.leftContainer_layout.getComponent(cc.Layout);i.type=cc.Layout.Type.VERTICAL,i.resizeMode=cc.Layout.ResizeMode.CONTAINER;var r=this.rightContainer_layout.getComponent(cc.Layout);r.type=cc.Layout.Type.VERTICAL,r.resizeMode=cc.Layout.ResizeMode.CONTAINER;var a=this.leftContainer_scroll.getComponent(cc.ScrollView);a.horizontal=!1,a.vertical=!0;var s=this.rightContainer_scroll.getComponent(cc.ScrollView);s.horizontal=!1,s.vertical=!0;var c=this.setPosition(n,"left",this.onAdCancel),h=this.setPosition(e,"right",this.onAdCancel);this.initView(a,this.leftContainer_layout,"left","leftAdItem",this.onAdCancel,c),this.initView(s,this.rightContainer_layout,"right","leftAdItem",this.onAdCancel,h)},vo.prototype.initEnd=function(){var t=this.endContainer_layout.getComponent(cc.Layout);t.type=cc.Layout.Type.GRID,t.resizeMode=cc.Layout.ResizeMode.NONE,this.initFiexdView(this.endContainer_layout,"8个固定大导出","fiexdAdItem",this.onAdCancel)},vo.prototype.initExport=function(){var t=this.exportContainer_layout.getComponent(cc.Layout),o=this.exportContainer_scroll.getComponent(cc.ScrollView);t.type=cc.Layout.Type.GRID,t.resizeMode=cc.Layout.ResizeMode.CONTAINER,this.initView(o,this.exportContainer_layout,"大导出","exportAdItem")},vo.prototype.disableRotate=function(){moosnow.form.formFactory.hideNodeByTemplate("rotateAdItem",null)},vo.prototype.initRotate=function(t){var l,m,u=this;this.mAdData&&(l=this.setPosition(this.mAdData.indexLeft,"旋转导出",t,!0),A.randomNumBoth(0,l.length-1),m="rotateAdItem",moosnow.form.formFactory.getTemplate(m,function(t){for(var o=t.width/2,e=t.height/2,n=[{x:-o-15,y:15+e},{x:15+o,y:15+e},{x:-o-15,y:-e-15},{x:15+o,y:-e-15}],i=[],r=[],a=0;a<4&&0!=l.length;a++){var s=A.randomNumBoth(0,l.length-1),c=l.splice(s,1)[0];c.x=n[a].x,c.y=n[a].y,i.push({appid:c.appid,position:c.position,index:a}),r.push(c)}r.forEach(function(t){t.source=l,t.showIds=i,moosnow.form.formFactory.createNodeByTemplate(m,uo,t,u.rotateContainer_layout)});var h=tt.canvasNode.width/2/800;u.rotateContainer_layout.children.forEach(function(t,o){t.x=n[o].x-tt.canvasNode.width/2,t.stopAllActions(),t.runAction(cc.spawn(cc.moveTo(h,new cc.Vec2(n[o].x,n[o].y)),cc.rotateBy(h,360)))})}))},vo.prototype.disableAd=function(){this.unschedule(this.onFwUpdate)},vo);function vo(){var t=null!==fo&&fo.apply(this,arguments)||this;return t.endContainer=null,t.endContainer_layout=null,t.exportContainer=null,t.exportContainer_scroll=null,t.exportContainer_layout=null,t.exportClose=null,t.formMask=null,t.exportCloseTxt=null,t.btnBack=null,t.floatContainer=null,t.floatFull=null,t.bannerContainer=null,t.bannerContainer_scroll=null,t.bannerContainer_layout=null,t.topContainer=null,t.topContainer_scroll=null,t.topContainer_layout=null,t.leftContainer=null,t.leftContainer_scroll=null,t.leftContainer_layout=null,t.rightContainer=null,t.rightContainer_scroll=null,t.rightContainer_layout=null,t.rotateContainer=null,t.rotateContainer_layout=null,t.sideContainer=null,t.sideView=null,t.sideLayout=null,t.btnSideShow=null,t.btnSideHide=null,t.mShowAd=s,t.mPrevShowAd=s,t.mScrollVec=[],t.mEndLogic=[],t.mMoveSpeed=2,t.mFloatIndex=0,t.mFloatRefresh=3,t.mFloatCache={},t.loadNum=0,t.loadManNum=3,t.mSecond=3,t.mAdItemList=[],t.floatRuning=!1,t}var go=(wo.create=function(t){return new t},Object.defineProperty(wo.prototype,"hideForm",{get:function(){return this._hideForm},set:function(t){this._hideForm=t},enumerable:!0,configurable:!0}),wo);function wo(){this._hideForm=!0,this.extraData={},this.zIndex=0}var Co,bo=(t(No,Co=go),No);function No(){var t=null!==Co&&Co.apply(this,arguments)||this;return t.floatPositon=[],t.floatTempletes=["floatAdItem1"],t}var Fo,Ao=(t(ko,Fo=bo),ko);function ko(){var t=null!==Fo&&Fo.apply(this,arguments)||this;return t.floatPositon=[],t.floatTempletes=["floatAdItem1"],t.adType=s,t.zIndex=cc.macro.MAX_ZINDEX,t.pointName="",t}var To,So=(t(xo,To=Ct),Object.defineProperty(xo.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),xo.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnCancel,function(){t.hideForm()}),this.applyClickAnim(this.btnVideo,function(){t.onVideo()}),this.applyClickAnim(this.btnReceive,function(){t.onReceive()}),this.applyClickAnim(this.btnShare,function(){t.onShare()})},xo.prototype.removeListener=function(){this.removeClickAnim(this.btnCancel),this.removeClickAnim(this.btnVideo),this.removeClickAnim(this.btnReceive),this.removeClickAnim(this.btnShare)},xo.prototype.willShow=function(t){To.prototype.willShow.call(this,t),this.addListener(),this.mTotalSecond=10,this.mCurrentSecond=0,this.FormData&&this.FormData.logo&&tt.changeSrc(this.logo,{url:this.FormData.logo,width:this.logo.width,height:this.logo.height}),this.resumeCountdown(),moosnow.platform.showBanner(!1)},xo.prototype.willHide=function(t){To.prototype.willShow.call(this,t),this.removeListener()},xo.prototype.onCountdown=function(){this.mCurrentSecond+=1;var t=this.mTotalSecond-this.mCurrentSecond;if(t<0)return this.unschedule(this.onCountdown),void this.hideForm();tt.changeText(this.txtCountdown,t+"秒")},xo.prototype.stopCountdown=function(){this.unschedule(this.onCountdown)},xo.prototype.resumeCountdown=function(){this.schedule(this.onCountdown,1)},xo.prototype.onShare=function(){var o=this;this.stopCountdown(),moosnow.platform.share({channel:""},function(t){o.resumeCountdown()})},xo.prototype.onVideo=function(){var o=this;this.stopCountdown(),moosnow.platform.showVideo(function(t){t!=_t&&(t==moosnow.VIDEO_STATUS.ERR?moosnow.form.showToast(Rt):moosnow.form.showToast(Vt),o.resumeCountdown())})},xo.prototype.onReceive=function(){this.mChecked&&this.onVideo()},xo);function xo(){var o=null!==To&&To.apply(this,arguments)||this;return o.btnCancel=null,o.txtCountdown=null,o.btnVideo=null,o.btnShare=null,o.btnReceive=null,o.logo=null,o.mChecked=!0,o.formComponents=[new Ht(o.mChecked,function(t){o.mChecked=t})],o.mTotalSecond=10,o.mCurrentSecond=0,o}var Do=(Lo.ToastForm="toastForm",Lo.AdForm="adForm",Lo.MistouchForm="mistouchForm",Lo.PrizeForm="prizeForm",Lo.TotalForm="totalForm",Lo.EndForm="endForm",Lo.RespawnForm="respawnForm",Lo.FailForm="failForm",Lo.PauseForm="pauseForm",Lo.ShareForm="shareForm",Lo.TryForm="tryForm",Lo.SetForm="setForm",Lo.BoxForm="boxForm",Lo.NativeForm="nativeForm",Lo);function Lo(){}var Oo,Io=(t(Po,Oo=Ct),Object.defineProperty(Po.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),Po.prototype.onShow=function(t){var o=this;Oo.prototype.onShow.call(this,t),this.node.zIndex=cc.macro.MAX_ZINDEX,this.addListener(),console.log("显示原生广告"),moosnow.platform.hideBanner(),moosnow.platform.showNativeAd(function(t){console.log("原生广告",t),t&&t.imgUrlList&&0<t.imgUrlList.length?(o.node.active=!0,6==t.creativeType?o.baseBox.height=o.baseBox.width/2:o.baseBox.height=.65625*o.baseBox.width,tt.changeText(o.txtMemo,t.desc),tt.changeSrc(o.logo,{url:t.imgUrlList[0],width:o.logo.width,height:o.logo.height})):(o.FormData&&o.FormData.nullCallback&&o.FormData.nullCallback(),moosnow.platform.showBanner(!1))}),moosnow.http.getAllConfig(function(t){t&&1==t.smallNativeAdClose&&(o.btnTopClose.scale=.7),t&&1==t.zs_native_click_switch?(o.btnOpen.active=!0,o.btnClose.active=!1):(o.btnOpen.active=!1,o.btnClose.active=!0)})},Po.prototype.willHide=function(t){this.remoteListener(),Oo.prototype.willHide.call(this,t)},Po.prototype.addListener=function(){var t=this;this.applyClickAnim(this.logo,function(){t.onOpenAd()}),this.applyClickAnim(this.btnOpen,function(){t.onOpenAd()}),this.applyClickAnim(this.btnTopClose,function(){t.onCloseAd()}),this.applyClickAnim(this.btnClose,function(){t.onCloseAd()})},Po.prototype.remoteListener=function(){this.removeClickAnim(this.logo),this.removeClickAnim(this.btnOpen),this.removeClickAnim(this.btnTopClose),this.removeClickAnim(this.btnClose)},Po.prototype.onCloseAd=function(){this.FormData&&this.FormData.callback&&this.FormData.callback(),this.hideForm()},Po.prototype.onOpenAd=function(){var t=this;moosnow.platform.clickNative(function(){t.hideForm()})},Po);function Po(){var t=null!==Oo&&Oo.apply(this,arguments)||this;return t.baseBox=null,t.logo=null,t.btnTopClose=null,t.btnClose=null,t.btnOpen=null,t.txtMemo=null,t}var _o,Bo=(t(Eo,_o=Ct),Object.defineProperty(Eo.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),Eo.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnVideo,function(){t.onVideoTry()}),this.applyClickAnim(this.btnHome,function(){t.onHome()})},Eo.prototype.removeListener=function(){this.removeClickAnim(this.btnVideo),this.removeClickAnim(this.btnHome)},Eo.prototype.onShow=function(t){_o.prototype.onShow.call(this,t),this.addListener()},Eo.prototype.onHide=function(t){_o.prototype.onHide.call(this,t),this.removeListener()},Eo.prototype.onVideoTry=function(){var o=this;moosnow.platform.showVideo(function(t){t==_t?(o.hideForm(),o.FormData.videoCallback&&o.FormData.videoCallback()):t==Et?moosnow.form.showToast(Rt):t==Bt&&moosnow.form.showToast(Vt)})},Eo.prototype.onHome=function(){this.hideForm(),this.FormData.callback&&this.FormData.callback()},Eo);function Eo(){var t=null!==_o&&_o.apply(this,arguments)||this;return t.btnVideo=null,t.btnHome=null,t}var Ro,Vo=(t(Ho,Ro=Ct),Object.defineProperty(Ho.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),Ho.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnBack,function(){t.onBack()}),this.applyClickAnim(this.btnVideo,function(){t.onVideo()})},Ho.prototype.removeListener=function(){this.removeClickAnim(this.btnBack)},Ho.prototype.onVideo=function(){var o=this;moosnow.platform.showVideo(function(t){t==_t?(o.hideForm(),o.FormData.videoCallback&&o.FormData.videoCallback()):t==Et?moosnow.form.showToast(Rt):t==Bt&&moosnow.form.showToast(Vt)})},Ho.prototype.onShow=function(t){this.addListener()},Ho.prototype.willHide=function(){this.removeListener()},Ho.prototype.onBack=function(){this.hideForm(),this.FormData.callback&&this.FormData.callback()},Ho);function Ho(){var t=null!==Ro&&Ro.apply(this,arguments)||this;return t.btnBack=null,t.btnVideo=null,t}var Mo=function(t,o,e){this.name="",this.formData=null,this.parent=null,this.remoteLayout=!0,this.layoutOptions=null,this.showOnce=!0,this.name=t,this.formLogic=o,this.formData=e},Qo=(Uo.prototype.initCheckboxState=function(t,o){void 0===t&&(t=!0),this.mCheckbox=new Ht(t,o),this.mCheckbox.onShow(null)},Uo.prototype.checkboxToggle=function(){this.mCheckbox.checkToggle()},Uo.prototype.applyClickAnim=function(t,o,e,n){void 0===e&&(e=!1),void 0===n&&(n=!0),this.mBaseForm.applyClickAnim(t,o,e,n)},Uo.prototype.removeClickAnim=function(t){this.mBaseForm.removeClickAnim(t)},Uo.prototype.showToast=function(t){this.formFactory.showForm(new Mo(Do.ToastForm,jt,t))},Uo.prototype.showNativeAd=function(t){this.formFactory.showForm(new Mo(Do.NativeForm,Io,t))},Uo.prototype.loadAd=function(t){var o=new Mo(Do.AdForm,yo,h(h({},new bo),t));o.callback=function(t){console.log("create ad form")},this.formFactory.showForm(o)},Uo.prototype.showAd=function(t,o,e,n,i,r){void 0===t&&(t=s),void 0===i&&(i=cc.macro.MAX_ZINDEX),void 0===r&&(r="");var a=new Ao;a.adType=t,a.zIndex=i,a.floatPositon=e,a.floatTempletes=n,a.pointName=r,a.callback=o,this.showAd2(a)},Uo.prototype.showAd2=function(t){moosnow.event.sendEventImmediately(i.AD_VIEW_CHANGE,{showAd:t.adType,zIndex:t.zIndex,points:t.floatPositon,templetes:t.floatTempletes,pointName:t.pointName,callback:t.callback})},Uo.prototype.hideAd=function(t){moosnow.event.sendEventImmediately(i.AD_VIEW_CHANGE,{showAd:s,callback:t})},Uo.prototype.showCoin=function(t){},Uo.prototype.showMistouch=function(t){this.formFactory.showForm(new Mo(Do.MistouchForm,ho,t))},Uo.prototype.showPrize=function(t){this.formFactory.showForm(new Mo(Do.PrizeForm,So,t))},Uo.prototype.showTotal=function(t){this.formFactory.showForm(new Mo(Do.TotalForm,Ut,t))},Uo.prototype.showEnd=function(t){this.formFactory.showForm(new Mo(Do.EndForm,Ft,t))},Uo.prototype.showRespawn=function(t){this.formFactory.showForm(new Mo(Do.RespawnForm,Bo,t))},Uo.prototype.showFail=function(t){this.formFactory.showForm(new Mo(Do.FailForm,Vo,t))},Uo.prototype.showPause=function(t){this.formFactory.showForm(new Mo(Do.PauseForm,Tt,t))},Uo.prototype.showShare=function(t){this.formFactory.showForm(new Mo(Do.ShareForm,ao,t))},Uo.prototype.showTry=function(t){this.formFactory.showForm(new Mo(Do.TryForm,Zt,t))},Uo.prototype.showSet=function(t){this.formFactory.showForm(new Mo(Do.SetForm,Yt,t))},Uo.prototype.showBox=function(t){this.formFactory.showForm(new Mo(Do.BoxForm,no,t))},Uo.prototype.createForm=function(t){this.formFactory.showForm(new Mo(t,Ct,{}))},Uo.prototype.hideForm=function(t){this.formFactory.hideForm(t,null)},Uo);function Uo(){this.mBaseForm=new Ct,this.formFactory=new vt}var zo,Wo=(t(jo,zo=P),jo.prototype.initPos=function(){},jo.prototype.move=function(t,o,e){var n=this;this.moveNode=t,this.distince=o,this.showBanner=e,this.initPos();var i=moosnow.data.getCurrentMisTouchCount();moosnow.data.setCurrentMisTouchCount(i+1),moosnow.http.getAllConfig(function(t){isNaN(t.mistouchPosSecond)||(n.mMistouchPosSecond=parseFloat(t.mistouchPosSecond)),moosnow.http.getMistouchPosNum(function(t){n.mMistouchPosNum=t,n.movePosition()})})},jo.prototype.setPosition=function(t,o,e,n){},jo.prototype.movePosition=function(){var t,o=this;0==this.mMistouchPosNum?(this.setPosition(this.moveNode,!0,this.pos1.x,this.pos1.y),this.showBanner&&moosnow.platform.showBanner()):moosnow.data.getCurrentMisTouchCount()%this.mMistouchPosNum==0&&(t=this.copyNode(),this.scheduleOnce(function(){o.onPosCallback(t)},this.mMistouchPosSecond))},jo.prototype.copyNode=function(){},jo.prototype.onPosCallback=function(t){this.showBanner&&moosnow.platform.showBanner(),this.removeTemp(t),this.setPosition(this.moveNode,!0,this.pos1.x,this.pos1.y),this.unscheduleOnce(this.onPosCallback)},jo.prototype.removeTemp=function(t){},jo);function jo(){var t=null!==zo&&zo.apply(this,arguments)||this;return t.moveNode=null,t.distince=-100,t.showBanner=!0,t.pos1=cc.Vec2.ZERO,t.pos2=cc.Vec2.ZERO,t.mMistouchPosNum=0,t.mMistouchPosSecond=2,t}var qo,Go=(t(Zo,qo=Wo),Zo.prototype.initPos=function(){0==this.pos1.x&&0==this.pos1.y&&(this.pos1=this.moveNode.position.clone(),this.pos2=this.pos1.add(new cc.Vec2(0,this.distince))),this.moveNode.active=!1},Zo.prototype.setPosition=function(t,o,e,n){t.active=o,t.x=e,t.y=n},Zo.prototype.copyNode=function(){var t=cc.instantiate(this.moveNode);return t.active=!0,this.moveNode.parent.addChild(t),t.x=this.pos2.x,t.y=this.pos2.y,t},Zo.prototype.removeTemp=function(t){t.active=!1,t.removeFromParent(),t.destroy()},Zo);function Zo(){var t=null!==qo&&qo.apply(this,arguments)||this;return t.moveNode=null,t.distince=-100,t.showBanner=!0,t.pos1=cc.Vec2.ZERO,t.pos2=cc.Vec2.ZERO,t}var Xo,Ko=(t(Yo,Xo=P),Yo.prototype.show=function(t,o){void 0===o&&(o=3),t&&(this.mNode=t,this.hideNode(),this.schedule(this.showNode,o))},Yo.prototype.hide=function(t,o){void 0===o&&(o=3),this.mNode=t,this.schedule(this.hideNode,o)},Yo.prototype.clear=function(){this.unschedule(this.showNode),this.unschedule(this.hideNode)},Yo.prototype.hideNode=function(){this.mNode.active=!1},Yo.prototype.showNode=function(){this.mNode.active=!0,this.unschedule(this.showNode)},Yo);function Yo(){var t=null!==Xo&&Xo.apply(this,arguments)||this;return t.mNode=null,t}var Jo,$o=(t(te,Jo=P),Object.defineProperty(te.prototype,"DelayMove",{get:function(){return this.mDelayMove||(this.mDelayMove=new Go),this.mDelayMove},enumerable:!0,configurable:!0}),Object.defineProperty(te.prototype,"DelayShow",{get:function(){return this.mDelayShow||(this.mDelayShow=new Ko),this.mDelayShow},enumerable:!0,configurable:!0}),te);function te(){return Jo.call(this)||this}var oe,ee=(t(ne,oe=go),ne);function ne(){return null!==oe&&oe.apply(this,arguments)||this}var ie,re=(t(ae,ie=go),ae);function ae(){var t=null!==ie&&ie.apply(this,arguments)||this;return t.logo=null,t.callback=null,t.shareCallback=null,t.videoCallback=null,t}var se,ce=(t(he,se=go),he);function he(){var t=null!==se&&se.apply(this,arguments)||this;return t.shareCoinNum=0,t}var le,me=(t(ue,le=go),ue);function ue(){return null!==le&&le.apply(this,arguments)||this}var pe,de=(t(fe,pe=go),fe);function fe(){var t=null!==pe&&pe.apply(this,arguments)||this;return t.coinNum=0,t}var ye,ve=function(){this.x=0,this.y=0,this.z=0},ge=(t(we,ye=go),we);function we(){var t=null!==ye&&ye.apply(this,arguments)||this;return t.randomY=100,t.randomX=100,t.imgNum=30,t.coinNum=0,t.starVec=new ve,t.endVec=new ve,t}var Ce=(Object.defineProperty(be.prototype,"formUtil",{get:function(){return this.mFormUtil},enumerable:!0,configurable:!0}),Object.defineProperty(be.prototype,"delay",{get:function(){return this.mDelay},set:function(t){this.mDelay=t},enumerable:!0,configurable:!0}),be);function be(){this.showOptions={endOptions:ee,prizeOptions:re,shareOptions:ce,totalOptions:me,touchOptions:de,coinOptions:ge},this.mFormUtil=new Qo,this.mDelay=new $o,window.moosnow?(window.moosnow.form=this.formUtil,window.moosnow.nodeHelper=tt):console.log("没有引入主SDK")}return new Ce,Ce}();
